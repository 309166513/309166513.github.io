<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Cold Tea个人博客网站</title>
	<meta name="keywords" content="吴相杰,博客,cold tea,前端">
	<meta name="description" content="吴相杰的个人博客网站">

	<link rel="shortcut icon" href="favicon.ico"/>
	<link rel="bookmark" href="favicon.ico"/>
	
	<link rel="stylesheet" type="text/css" href="css/cssreset.css">
	<link rel="stylesheet" type="text/css" href="css/base.css">
	<link rel="stylesheet" type="text/css" href="css/blogs.css">
	<link rel="stylesheet" type="text/css" href="css/shCoreDefault.css">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">
</head>
<body>
	<div class="ibody clearfix">

<!-- /header -->
		<header>
			<h1>Cold Tea</h1>
			<h2>
				那些我们一直惴惴不安 而又充满好奇的未来 在我心里 隐隐约约地感觉到它们是明亮的
			</h2>

<!-- 头部logo -->
			<div class="logo">
				<a href="https://309166513.github.io/index.html"></a>
			</div>
			<div id="time_location">
				<span></span>
				<span></span>
			</div>
<!-- 头部导航 -->			
			<nav id="topnav">
				<a href="https://309166513.github.io/index.html">首页</a>
				<a href="https://309166513.github.io/about.html">关于我</a>
				<a href="https://309166513.github.io/blog.html">博文列表</a>
				<a href="https://309166513.github.io/works.html">作品</a>
				<a href="https://309166513.github.io/messages.html">留言板</a>
			</nav>
		</header>
<!-- about主栏 -->
	<article>
		<div class="your_pos">
			
			<span>
				您当前所在的位置是：<a href="https://309166513.github.io/index.html">首页</a>><a href="https://309166513.github.io/blog.html">博文列表</a>><span class="tit"></span>
			</span>
		</div>

		<div class="content">

<!-- 文章标题 -->
			<h3 class="blog_tit">
				使用原生JS封装ajax方法
			</h3>
<!-- class="brush:xml brush:css brush:js" -->
<!-- 文章内容区 -->
			<p>
				当项目只需要使用ajax而不需要引用jquery时，此时封装一个ajax方法非常必要，下面给出主要代码
			</p>
			<p>
				<pre class="brush:js">

	function ajax(obj){
		obj.method = obj.method.toUpperCase()||'POST';
		obj.url = obj.url||'';
		obj.async= obj.async||true;
		obj.data = obj.data||null;
		obj.success = obj.success ||function(){};
		//新建xml对象
		var xml= null;
		if(window.XMLHttpRequest){

			xml= new XMLHttpRequest();
		}else{
		//兼容IE
			xml= new ActiveXObject("Microsoft.XMLHTTP");
		}

		var arr = [];
		for(attr in obj.data){
			arr.push(attr+'='+obj.data[attr]);
		}
		var postData = arr.join('&');

		if(obj.method.toUpperCase()==='POST'){
		//当请求方式为‘POST’时	
			xml.open(obj.method,obj.url,obj.async);
			xml.setRequestHeader('Content-Type','application/x-www-form-urlencoded;charset=utf-8');
			xml.send(postData);
		}else if(obj.method.toUpperCase()=='GET'){
			//当请求方式为‘GET’时	
			xml.open(obj.method,obj.url,obj.async);
			xml.send(null);
		}
		//设置回调函数
		xml.onreadystatechange=function(){
			if(xml.readyState==4&&xml.status==200){
				obj.success(xml.responseText);
			}
		}

	}

				</pre>
			</p>
			<p>
				函数使用实例：
			</p>
			<p>
				<pre class="brush:js">
					ajax({
						method:'POST',
						url:'test.php',
						data:{
							name1:'value1',
							name2:'value2'
						}
						success:function(response){
							dosomethingwith(response);
						}
					})
				</pre>
			</p>
			
		</div>


		
	</article>




<!-- about边栏 -->
		<aside>
			<div class="side_nav" id ='side_nav'>
				<ul>
					<li>
						<a href="https://309166513.github.io/index.html">首页</a>
					</li>
					<li>
						<a href="https://309166513.github.io/about.html">关于我</a>
					</li>
					<li>
						<a href="https://309166513.github.io/blog.html">博文列表</a>
					</li>
					<li>
						<a href="https://309166513.github.io/works.html">作品</a>
					</li>
					
					<li>
						<a href="https://309166513.github.io/messages.html">留言板</a>
					</li>
				</ul>
			</div>
			


		</aside>

		<footer style='clear:both'>
			© Copyright 2016 Cold Tea
		</footer>
		<script type="text/javascript" src='js/shCore.js'></script>
		<script type="text/javascript" src='js/shBrushJScript.js'></script>
		<script type="text/javascript" src='js/shBrushCss.js'></script>
		<script type="text/javascript" src='js/shBrushXml.js'></script>
		<script type="text/javascript" src='js/jQuery3.1.0.min.js'></script>
		
		<script type="text/javascript" src='js/index.js'></script>
		<script type="text/javascript" src='js/blogs.js'></script>
<script type="text/javascript">
	function ajax(obj){
		obj.method = obj.method.toUpperCase()||'POST';
		obj.url = obj.url||'';
		obj.async= obj.async||true;
		obj.data = obj.data||null;
		obj.success = obj.success ||function(){};
		//新建xml对象
		var xml= null;
		if(window.XMLHttpRequest){

			xml= new XMLHttpRequest();
		}else{
		//兼容IE
			xml= new ActiveXObject("Microsoft.XMLHTTP");
		}

		var arr = [];
		for(attr in obj.data){
			arr.push(attr+'='+obj.data[attr]);
		}
		var postData = arr.join('&');

		if(obj.method.toUpperCase()==='POST'){
		//当请求方式为‘POST’时	
			xml.open(obj.method,obj.url,obj.async);
			xml.setRequestHeader('Content-Type','application/x-www-form-urlencoded;charset=utf-8');
			xml.send(postData);
		}else if(obj.method.toUpperCase()=='GET'){
			//当请求方式为‘GET’时	
			xml.open(obj.method,obj.url,obj.async);
			xml.send(null);
		}
		//设置回调函数
		xml.onreadystatechange=function(){
			if(xml.readyState==4&&xml.status==200){
				obj.success(xml.responseText);
			}
		}

	}


</script>		
		
	</div>
</body>
</html>